<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>18 LURN... To create maps</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next --> 
<meta name="src" content="LURN.tex"> 
<meta name="date" content="2018-03-28 12:00:00"> 
<link rel="stylesheet" type="text/css" href="LURN.css"> 
</head><body 
>
   <!--l. 9--><div class="crosslinks"><p class="noindent">[<a 
href="../LURNblind/LURNBlindch18.html">Version for blind users</a>] [<a 

href="LURNch19.html" >next</a>] [<a 
href="LURNch17.html" >prev</a>] [<a 
href="LURNch17.html#tailLURNch17.html" >prev-tail</a>] [<a 
href="#tailLURNch18.html">tail</a>] [<a 
href="LURN.html#LURNch18.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;18</span><br /><a 
 id="x20-14400018"></a>LURN&#x2026; To create maps</h2>
<!--l. 18--><p class="noindent" >This chapter explains how to create simple maps using some add-on packages. You
will need to have installed the <a 
 id="dx20-144001"></a><span 
class="aeti-12">maps</span>, <a 
 id="dx20-144002"></a><span 
class="aeti-12">mapdata</span>, and <a 
 id="dx20-144003"></a><span 
class="aeti-12">ggmap </span>packages to complete
the examples in this chapter. If you have not installed an add-on package before,
you should take a look at Chapter&#x00A0;<a 
href="LURNch16.html#x18-13100016">16<!--tex4ht:ref: Additional --></a> first.
<!--l. 20--><p class="indent" >   After installing the packages, load them into your <span 
class="aess-12">R </span>session using:
   <div class="fancyvrb" id="fancyvrb416">  <a 
 id="x20-144005r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;library(maps)</span></div>
<div class="fancyvrb" id="fancyvrb417"> <a 
 id="x20-144007r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error:</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;or</span><span 
class="aett-12">&#x00A0;namespace</span><span 
class="aett-12">&#x00A0;load</span><span 
class="aett-12">&#x00A0;failed</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">maps</span><span 
class="tctt-1200">'</span><span 
class="aett-12">:</span>
<br class="fancyvrb" /><a 
 id="x20-144009r2"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">maps</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;was</span><span 
class="aett-12">&#x00A0;installed</span><span 
class="aett-12">&#x00A0;by</span><span 
class="aett-12">&#x00A0;an</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;different</span><span 
class="aett-12">&#x00A0;internals;</span><span 
class="aett-12">&#x00A0;it</span><span 
class="aett-12">&#x00A0;needs</span><span 
class="aett-12">&#x00A0;to</span><span 
class="aett-12">&#x00A0;be</span><span 
class="aett-12">&#x00A0;reinstalled</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;use</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;this</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span></div>
<div class="fancyvrb" id="fancyvrb418"> <a 
 id="x20-144011r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;library(mapdata)</span></div>
<div class="fancyvrb" id="fancyvrb419"> <a 
 id="x20-144013r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Loading</span><span 
class="aett-12">&#x00A0;required</span><span 
class="aett-12">&#x00A0;package:</span><span 
class="aett-12">&#x00A0;maps</span></div>
<div class="fancyvrb" id="fancyvrb420"> <a 
 id="x20-144015r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error:</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;or</span><span 
class="aett-12">&#x00A0;namespace</span><span 
class="aett-12">&#x00A0;load</span><span 
class="aett-12">&#x00A0;failed</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">maps</span><span 
class="tctt-1200">'</span><span 
class="aett-12">:</span>
<br class="fancyvrb" /><a 
 id="x20-144017r2"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">maps</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;was</span><span 
class="aett-12">&#x00A0;installed</span><span 
class="aett-12">&#x00A0;by</span><span 
class="aett-12">&#x00A0;an</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;different</span><span 
class="aett-12">&#x00A0;internals;</span><span 
class="aett-12">&#x00A0;it</span><span 
class="aett-12">&#x00A0;needs</span><span 
class="aett-12">&#x00A0;to</span><span 
class="aett-12">&#x00A0;be</span><span 
class="aett-12">&#x00A0;reinstalled</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;use</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;this</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span></div>
<div class="fancyvrb" id="fancyvrb421"> <a 
 id="x20-144019r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error:</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">maps</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;be</span><span 
class="aett-12">&#x00A0;loaded</span></div>
<div class="fancyvrb" id="fancyvrb422"> <a 
 id="x20-144021r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;library(ggmap)</span></div>
<div class="fancyvrb" id="fancyvrb423"> <a 
 id="x20-144023r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Loading</span><span 
class="aett-12">&#x00A0;required</span><span 
class="aett-12">&#x00A0;package:</span><span 
class="aett-12">&#x00A0;ggplot2</span></div>
<div class="fancyvrb" id="fancyvrb424"> <a 
 id="x20-144025r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><br class="fancyvrb" /><a 
 id="x20-144027r2"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Attaching</span><span 
class="aett-12">&#x00A0;package:</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">ggplot2</span><span 
class="tctt-1200">'</span></div>
<div class="fancyvrb" id="fancyvrb425"> <a 
 id="x20-144029r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;The</span><span 
class="aett-12">&#x00A0;following</span><span 
class="aett-12">&#x00A0;objects</span><span 
class="aett-12">&#x00A0;are</span><span 
class="aett-12">&#x00A0;masked</span><span 
class="aett-12">&#x00A0;from</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">package:BrailleR</span><span 
class="tctt-1200">'</span><span 
class="aett-12">:</span><br class="fancyvrb" /><a 
 id="x20-144031r2"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><br class="fancyvrb" /><a 
 id="x20-144033r3"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;xlab,</span><span 
class="aett-12">&#x00A0;ylab</span></div>
<div class="fancyvrb" id="fancyvrb426"> <a 
 id="x20-144035r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error:</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;or</span><span 
class="aett-12">&#x00A0;namespace</span><span 
class="aett-12">&#x00A0;load</span><span 
class="aett-12">&#x00A0;failed</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">ggmap</span><span 
class="tctt-1200">'</span><span 
class="aett-12">:</span>
<br class="fancyvrb" /><a 
 id="x20-144037r2"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;package</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">png</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;was</span><span 
class="aett-12">&#x00A0;installed</span><span 
class="aett-12">&#x00A0;by</span><span 
class="aett-12">&#x00A0;an</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;different</span><span 
class="aett-12">&#x00A0;internals;</span><span 
class="aett-12">&#x00A0;it</span><span 
class="aett-12">&#x00A0;needs</span><span 
class="aett-12">&#x00A0;to</span><span 
class="aett-12">&#x00A0;be</span><span 
class="aett-12">&#x00A0;reinstalled</span><span 
class="aett-12">&#x00A0;for</span><span 
class="aett-12">&#x00A0;use</span><span 
class="aett-12">&#x00A0;with</span><span 
class="aett-12">&#x00A0;this</span><span 
class="aett-12">&#x00A0;R</span><span 
class="aett-12">&#x00A0;version</span></div>
                                                                          

                                                                          
   <h3 class="sectionHead"><span class="titlemark">18.1   </span> <a 
 id="x20-14500018.1"></a>Creation of maps</h3>
<!--l. 69--><p class="noindent" >The creation of maps is actually a simple task in <span 
class="aess-12">R</span>, as long as the database for the
desired land mass is available. There are a number of these data bases available as
downloadable packages from CRAN.
<!--l. 71--><p class="indent" >   I first created a map when I wanted a map of New Zealand (my home country)
for a presentation I gave when I was overseas. I also wanted to show a portion
of the country to highlight how far my home town is from the nation&#8217;s
capital. The rectangle that appears on the map of New Zealand was created
using the <a 
 id="dx20-145001"></a><span 
class="aett-12">polygon() </span>command. The <a 
 id="dx20-145002"></a><span 
class="aett-12">box() </span>command places the frame
around the map which is created using the <a 
 id="dx20-145003"></a><span 
class="aett-12">map() </span>command. Exhibit&#x00A0;<a 
href="#x20-145004r1">18.1<!--tex4ht:ref: WholeNZ --></a>
shows the first map, while Exhibit&#x00A0;<a 
href="#x20-146002r2">18.2<!--tex4ht:ref: PartNZ --></a> shows the central part of the
country.
                                                                          

                                                                          
<!--l. 73--><p class="indent" >   <a 
 id="x20-145004r1"></a><hr class="float"><div class="float" 
>
                                                                          

                                                                          
 <div class="caption" 
><span class="id">Exhibit 18.1: </span><span  
class="content">Map of New Zealand with a rectangle marked on it that bounds
the area used in a subsequent map.</span></div><!--tex4ht:label?: x20-145004r1 -->
<div class="center" 
>
<!--l. 75--><p class="noindent" >
<div class="fancyvrb" id="fancyvrb427"> <a 
 id="x20-145006r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;map("nzHires",</span><span 
class="aett-12">&#x00A0;ylim=c(-48,-34),</span><span 
class="aett-12">&#x00A0;xlim=c(166,179),</span><span 
class="aett-12">&#x00A0;fill=T,</span><span 
class="aett-12">&#x00A0;col=3)</span></div>
<div class="fancyvrb" id="fancyvrb428">
<a 
 id="x20-145008r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;map("nzHires",</span><span 
class="aett-12">&#x00A0;ylim</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(-48,</span><span 
class="aett-12">&#x00A0;-34),</span><span 
class="aett-12">&#x00A0;xlim</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(166,</span><span 
class="aett-12">&#x00A0;179),</span><span 
class="aett-12">&#x00A0;fill</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;T,</span><span 
class="aett-12">&#x00A0;:</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"map"</span></div>
<div class="fancyvrb" id="fancyvrb429"> <a 
 id="x20-145010r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;box()</span></div>
<div class="fancyvrb" id="fancyvrb430"> <a 
 id="x20-145012r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;box():</span><span 
class="aett-12">&#x00A0;plot.new</span><span 
class="aett-12">&#x00A0;has</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;been</span><span 
class="aett-12">&#x00A0;called</span><span 
class="aett-12">&#x00A0;yet</span></div>
<div class="fancyvrb" id="fancyvrb431"> <a 
 id="x20-145014r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;polygon(x=c(172,</span><span 
class="aett-12">&#x00A0;179,</span><span 
class="aett-12">&#x00A0;179,</span><span 
class="aett-12">&#x00A0;172),</span><span 
class="aett-12">&#x00A0;y=c(-42,-42,</span><span 
class="aett-12">&#x00A0;-39,-39),</span><span 
class="aett-12">&#x00A0;border=1,</span><span 
class="aett-12">&#x00A0;lty=2)</span></div>
<div class="fancyvrb" id="fancyvrb432">
<a 
 id="x20-145016r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;polygon(x</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(172,</span><span 
class="aett-12">&#x00A0;179,</span><span 
class="aett-12">&#x00A0;179,</span><span 
class="aett-12">&#x00A0;172),</span><span 
class="aett-12">&#x00A0;y</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(-42,</span><span 
class="aett-12">&#x00A0;-42,</span><span 
class="aett-12">&#x00A0;-39,</span><span 
class="aett-12">&#x00A0;-39),</span><span 
class="aett-12">&#x00A0;:</span><span 
class="aett-12">&#x00A0;plot.new</span><span 
class="aett-12">&#x00A0;has</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;been</span><span 
class="aett-12">&#x00A0;called</span><span 
class="aett-12">&#x00A0;yet</span></div>
<!--l. 100--><p class="noindent" ><a 
href="../svgs/MapsWholeNZ-1.html" >link to SVG file: MapsWholeNZ-1.svg</a></div>
                                                                          

                                                                          
   </div><hr class="endfloat" />
<!--l. 104--><p class="indent" >   The maps in these graphs are based on latitude and longitude data. The <a 
 id="dx20-145017"></a><span 
class="aett-12">map()</span>
function ensures the aspect ratio of the resulting plot is in keeping with the actual
view you would have from space if you were directly above the centre of the map
being plotted. Note that this rule doesn&#8217;t apply for the world map options that
exist.
   <h3 class="sectionHead"><span class="titlemark">18.2   </span> <a 
 id="x20-14600018.2"></a>Adding cities to a map</h3>
<!--l. 108--><p class="noindent" >The <a 
 id="dx20-146001"></a><span 
class="aett-12">map.cities() </span>function extracts data from a database of the world&#8217;s cities.
Judicious selection of the criteria for population was required to get Palmerston
North marked, and the <span 
class="aett-12">capitals </span>argument was used to get the point for
Wellington. I have used some colours to distinguish the different cities for my
plot.
                                                                          

                                                                          
<!--l. 111--><p class="indent" >   <a 
 id="x20-146002r2"></a><hr class="float"><div class="float" 
>
                                                                          

                                                                          
 <div class="caption" 
><span class="id">Exhibit 18.2: </span><span  
class="content">Map showing the central part of New Zealand in order to show
two cities in the lower North Island.</span></div><!--tex4ht:label?: x20-146002r2 -->
<div class="center" 
>
<!--l. 113--><p class="noindent" >
<div class="fancyvrb" id="fancyvrb433"> <a 
 id="x20-146004r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;map("nzHires",</span><span 
class="aett-12">&#x00A0;ylim=c(-42,-39),</span><span 
class="aett-12">&#x00A0;xlim=c(172,179),</span><span 
class="aett-12">&#x00A0;fill=T,</span><span 
class="aett-12">&#x00A0;col=3)</span></div>
<div class="fancyvrb" id="fancyvrb434">
<a 
 id="x20-146006r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;map("nzHires",</span><span 
class="aett-12">&#x00A0;ylim</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(-42,</span><span 
class="aett-12">&#x00A0;-39),</span><span 
class="aett-12">&#x00A0;xlim</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c(172,</span><span 
class="aett-12">&#x00A0;179),</span><span 
class="aett-12">&#x00A0;fill</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;T,</span><span 
class="aett-12">&#x00A0;:</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"map"</span></div>
<div class="fancyvrb" id="fancyvrb435"> <a 
 id="x20-146008r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;box()</span></div>
<div class="fancyvrb" id="fancyvrb436"> <a 
 id="x20-146010r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;box():</span><span 
class="aett-12">&#x00A0;plot.new</span><span 
class="aett-12">&#x00A0;has</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;been</span><span 
class="aett-12">&#x00A0;called</span><span 
class="aett-12">&#x00A0;yet</span></div>
<div class="fancyvrb" id="fancyvrb437"> <a 
 id="x20-146012r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;map.cities(minpop=70000,maxpop=80000,</span><span 
class="aett-12">&#x00A0;pch=16,</span><span 
class="aett-12">&#x00A0;col=2,</span><span 
class="aett-12">&#x00A0;cex=2)</span></div>
<div class="fancyvrb" id="fancyvrb438">
<a 
 id="x20-146014r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;map.cities(minpop</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;70000,</span><span 
class="aett-12">&#x00A0;maxpop</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;80000,</span><span 
class="aett-12">&#x00A0;pch</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;16,</span><span 
class="aett-12">&#x00A0;col</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;2,</span><span 
class="aett-12">&#x00A0;:</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"map.cities"</span></div>
<div class="fancyvrb" id="fancyvrb439"> <a 
 id="x20-146016r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;map.cities(capitals=1,</span><span 
class="aett-12">&#x00A0;col=4,</span><span 
class="aett-12">&#x00A0;pch=19)</span></div>
<div class="fancyvrb" id="fancyvrb440"> <a 
 id="x20-146018r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;map.cities(capitals</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;1,</span><span 
class="aett-12">&#x00A0;col</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;4,</span><span 
class="aett-12">&#x00A0;pch</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;19):</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"map.cities"</span></div>
<!--l. 144--><p class="noindent" ><a 
href="../svgs/MapsPartNZ-1.html" >link to SVG file: MapsPartNZ-1.svg</a></div>
                                                                          

                                                                          
   </div><hr class="endfloat" />
<!--l. 148--><p class="indent" >   One challenge in making this graphic presentable for this document was
assuring myself that the aspect ratio was correct. Latitudes and longitudes do not
take up equal space especially as you move further from the tropics. <span 
class="aess-12">R </span>will get the
aspect ratio correct but being sure is another matter.
<!--l. 151--><p class="indent" >   The graph I first created for this example was 5.7cm high and just over
10cm wide. Was it in proportion though? If each degree of latitude in
the map used 1cm of space, we would expect each degree of longitude
to take up at most 1 cm of space. An approximation for this is found
by multiplying the latitude space by <span 
class="cmr-12">cos</span><span 
class="cmr-12">(</span><span 
class="cmmi-12">&#x03B8;</span><span 
class="cmr-12">) </span>where <span 
class="cmmi-12">&#x03B8; </span>is the latitude. So
each degree of longitude in my plot should take up about 0.76 of the
space of each degree of latitude. I&#8217;ve plotted three degrees of latitude
and seven degrees of longitude, so I expect my 5.7cm high graphic to
be
   <center class="math-display" >
<img 
src="LURN57x.png" alt="5.7
 3 &#x00D7;  7 &#x00D7; 0.76 ==  10.1  " class="math-display" ></center>
centimetres in width. This was about right.
<!--l. 155--><p class="indent" >   You can see the way we would do this calculation using <span 
class="aess-12">R </span>in Chapter&#x00A0;<a 
href="LURNch19.html#x21-14800019">19<!--tex4ht:ref: ScientificCalculator --></a>.
   <h3 class="sectionHead"><span class="titlemark">18.3   </span> <a 
 id="x20-14700018.3"></a>Using Google&#8217;s services to map locations of interest</h3>
<!--l. 160--><p class="noindent" >The ability to search Google for specific locations is really useful, especially if you
intend plotting maps with points of interest such as universities rather than just
cities. Our first example does look for cities though, so that it builds on examples
from previous sections in this chapter.
<!--l. 162--><p class="indent" >   In mid-2015, I will attend the UseR conference in Aalborg, which is in
Denmark. I know Denmark has a coastline and is bordered by Germany, but
actually I don&#8217;t know much else (especially where individual cities are!). I want ot
know where the city of Aalborg is in relation to Copenhagen (the capital of
Denmark). Witht he help of the <a 
 id="dx20-147001"></a><span 
class="aeti-12">ggmap </span>package tapping into Google maps, I can
find the latitute and longitude for both cities and then plot them on the map of
Denmark as follows:
                                                                          

                                                                          
<!--l. 166--><p class="indent" >
   <div class="fancyvrb" id="fancyvrb441">  <a 
 id="x20-147003r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;Places</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;geocode(location=c("Aalborg",</span><span 
class="aett-12">&#x00A0;"Copenhagen"))</span></div>
<!--l. 169--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb442">
<a 
 id="x20-147005r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;geocode(location</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;c("Aalborg",</span><span 
class="aett-12">&#x00A0;"Copenhagen")):</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"geocode"</span></div>
<!--l. 172--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb443"> <a 
 id="x20-147007r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;Places</span></div>
<!--l. 175--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb444"> <a 
 id="x20-147009r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;eval(expr,</span><span 
class="aett-12">&#x00A0;envir,</span><span 
class="aett-12">&#x00A0;enclos):</span><span 
class="aett-12">&#x00A0;object</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">Places</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;found</span></div>
<!--l. 178--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb445"> <a 
 id="x20-147011r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;map(</span><span 
class="tctt-1200">'</span><span 
class="aett-12">worldHires</span><span 
class="tctt-1200">'</span><span 
class="aett-12">,</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">Denmark</span><span 
class="tctt-1200">'</span><span 
class="aett-12">)</span></div>
<!--l. 181--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb446"> <a 
 id="x20-147013r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;map("worldHires",</span><span 
class="aett-12">&#x00A0;"Denmark"):</span><span 
class="aett-12">&#x00A0;could</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;find</span><span 
class="aett-12">&#x00A0;function</span><span 
class="aett-12">&#x00A0;"map"</span></div>
<!--l. 184--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb447"> <a 
 id="x20-147015r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;title(</span><span 
class="tctt-1200">'</span><span 
class="aett-12">Denmark</span><span 
class="tctt-1200">'</span><span 
class="aett-12">)</span></div>
<!--l. 187--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb448"> <a 
 id="x20-147017r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;title("Denmark"):</span><span 
class="aett-12">&#x00A0;plot.new</span><span 
class="aett-12">&#x00A0;has</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;been</span><span 
class="aett-12">&#x00A0;called</span><span 
class="aett-12">&#x00A0;yet</span></div>
<!--l. 190--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb449"> <a 
 id="x20-147019r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;points(Places,</span><span 
class="aett-12">&#x00A0;pch=16)</span></div>
<!--l. 193--><p class="noindent" >
   <div class="fancyvrb" id="fancyvrb450"> <a 
 id="x20-147021r1"></a><span 
class="aett-12">&#x00A0;</span><span 
class="aett-12">&#x00A0;Error</span><span 
class="aett-12">&#x00A0;in</span><span 
class="aett-12">&#x00A0;points(Places,</span><span 
class="aett-12">&#x00A0;pch</span><span 
class="aett-12">&#x00A0;=</span><span 
class="aett-12">&#x00A0;16):</span><span 
class="aett-12">&#x00A0;object</span><span 
class="aett-12">&#x00A0;</span><span 
class="tctt-1200">'</span><span 
class="aett-12">Places</span><span 
class="tctt-1200">'</span><span 
class="aett-12">&#x00A0;not</span><span 
class="aett-12">&#x00A0;found</span></div>
                                                                          

                                                                          
   <!--l. 8--><div class="crosslinks"><p class="noindent">[<a 
href="../LURNblind/LURNBlindch18.html">Version for blind users</a>] [<a 

href="LURNch19.html" >next</a>] [<a 
href="LURNch17.html" >prev</a>] [<a 
href="LURNch17.html#tailLURNch17.html" >prev-tail</a>] [<a 
href="LURNch18.html" >front</a>] [<a 
href="LURN.html#LURNch18.html" >up</a>] </p></div>
<!--l. 8--><p class="indent" >   <a 
 id="tailLURNch18.html"></a>   
</body></html> 
