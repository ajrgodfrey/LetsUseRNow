<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>10 LURN... To Become More Efficient in your Workplace</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next --> 
<meta name="src" content="LURNBlind.tex"> 
<meta name="date" content="2016-06-02 16:55:00"> 
<link rel="stylesheet" type="text/css" href="LURNBlind.css"> 
</head><body 
>
   <!--l. 2--><div class="crosslinks"><p class="noindent">[<a 
href="LURNBlindch11.html" >next</a>] [<a 
href="LURNBlindch9.html" >prev</a>] [<a 
href="LURNBlindch9.html#tailLURNBlindch9.html" >prev-tail</a>] [<a 
href="#tailLURNBlindch10.html">tail</a>] [<a 
href="LURNBlind.html#LURNBlindch10.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;10</span><br /><a 
 id="x12-7100010"></a>LURN&#x2026; To Become More Efficient in your Workplace</h2>
<!--l. 7--><p class="noindent" >This chapter is aimed at the efficient use of <span 
class="aess-12">R</span>. To make use of the functionality
described here you must have read the material on storing your results in
Chapter&#x00A0;<a 
href="LURNBlindch9.html#x11-650009">9<!--tex4ht:ref: StoreResults --></a>.
   <h3 class="sectionHead"><span class="titlemark">10.1   </span> <a 
 id="x12-7200010.1"></a>Managing <span 
class="aess-12">R </span>when you have multiple projects on the go</h3>
<!--l. 11--><p class="noindent" >One of the greatest frustrations for novice users when using software like <span 
class="aess-12">R </span>is the
management of the various datasets and projects they have. The temptation to
give objects short names that mean something now and are utterly mystifying in
six months time (perhaps when you go to do a clean out) is a common trap. If it
is something temporary, give it a useless uninformative name; if it&#8217;s actually going
to be important, give it a useful informative name when you first create
it.
<!--l. 13--><p class="indent" >   It&#8217;s also common to just start working in the main working directory and just
keep on adding various data sets and analysis objects until such time as the
working directory has hundreds of objects and becomes unwieldy. If you plan to
use <span 
class="aess-12">R </span>for one or two analyses and then move on this might work, but this is not
good practice.
<!--l. 15--><p class="indent" >   My recommendation is to use different folders for the different projects you
wish to work on. I make folders and subfolders for my <span 
class="aess-12">R </span>work in the same way I
would for my word processed documents. By changing the working directory, we
end up with a command history and stored workspace specific to the one project.
It also means your graphs are saved here and are then easier to find. It might even
prove useful to keep the <span 
class="aess-12">R </span>work and the associated word processed documents in
the same folder.
<!--l. 17--><p class="indent" >   If you change working directory, either using the menus or the <a 
 id="dx12-72001"></a><span 
class="aett-12">setwd()</span>
command and save the workspace when quitting <span 
class="aess-12">R</span>, you will see that files called
<span 
class="aett-12">.RData</span> and <span 
class="aett-12">.Rhistory</span> have been created. When you open <span 
class="aess-12">R </span>and change to this
working directory, you will have access to the relevant data and command
history.
<!--l. 19--><p class="indent" >   The following is useful as a Windows user of <span 
class="aess-12">R</span>. As an additional step towards
efficiency, I copy the shortcut used to start <span 
class="aess-12">R </span>into each working directory. It will
need slight editing to make sure the shortcut doesn&#8217;t quite take the default action
by deleting the contents of the &#8220;Start in" dialogue box for the shortcut&#8217;s
properties. In this way, I can use Windows Explorer to move to the folder for a
certain project and click the shortcut for <span 
class="aess-12">R </span>to get started on a project at the point
where I left off.
                                                                          

                                                                          
<!--l. 21--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">10.2   </span> <a 
 id="x12-7300010.2"></a>Batch processing commands</h3>
<!--l. 23--><p class="noindent" >When your <span 
class="aess-12">R </span>program gets to have a lot of commands that must be processed in
order, it&#8217;s a good idea to use the <span 
class="aess-12">R </span>script window or a text editor to create a file
with the commands in it. Keeping your commands in a text file means you can
share them with colleagues very easily.
<!--l. 25--><p class="indent" >   If you choose to use the <span 
class="aess-12">R </span>script window, then the commands are typed up
and are not executed until you specifically request for them to be executed. This is
achieved using the pull down menus.
<!--l. 27--><p class="indent" >   If you have saved the commands in a text file, and this text file is placed in
your working directory, you will be able to execute the commands using the
<a 
 id="dx12-73001"></a><span 
class="aett-12">source() </span>command.
<!--l. 29--><p class="indent" >   As a simple experiment, type up some commands in a new script window.
Execute them using the pull down menus. Now save the commands in a text file,
and go to the <span 
class="aess-12">R </span>console and type <span 
class="aett-12">source("myfile.R") </span>&#8212; note that I used the
extension &#8220;R" in the filename here. This is common practice among <span 
class="aess-12">R</span>
users.
<!--l. 31--><p class="indent" >   If you&#8217;re not using the main Windows version of <span 
class="aess-12">R</span>, you will be entering
commands in a terminal window. In this case, it&#8217;s probably easiest to use your
favourite text editor software to type up and save your <span 
class="aess-12">R </span>commands. It doesn&#8217;t
matter which version of <span 
class="aess-12">R </span>is being used, the <a 
 id="dx12-73002"></a><span 
class="aett-12">source() </span>command will behave
consistently.
<!--l. 34--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">10.3   </span> <a 
 id="x12-7400010.3"></a>Running an <span 
class="aess-12">R </span>script without opening <span 
class="aess-12">R </span>under Windows</h3>
<!--l. 36--><p class="noindent" >Running your <span 
class="aess-12">R </span>programs on another computer is a great idea because it means
you can get on with another project while a long program is running. You&#8217;ll
probably need some support from your local network administrator to achieve
that, but in the meantime you can see how it&#8217;s done by running some jobs in the
background on your own machine.
<!--l. 38--><p class="indent" >   In the previous section I discussed the ability to use the <a 
 id="dx12-74001"></a><span 
class="aett-12">source() </span>command to
import a text file of commands into an <span 
class="aess-12">R </span>session.
<!--l. 40--><p class="indent" >   To continue with the rest of this section we need to know where to find <span 
class="aess-12">R </span>on
our local machine. On my computer this was
<div class="center" 
>
<!--l. 40--><p class="noindent" >
<!--l. 40--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="aett-12">C:\Program</span><span 
class="aett-12">&#x00A0;Files\R\R-</span></span></span>3.3.0</div>
                                                                          

                                                                          
<!--l. 42--><p class="noindent" >because I installed this version of <span 
class="aess-12">R </span>using the default settings. This folder is often
called R_HOME. If you haven&#8217;t installed <span 
class="aess-12">R </span>using the default settings, you will
need to find out where your R_HOME is and remember it in the instructions that
follow.
<!--l. 44--><p class="indent" >   What we actually want is to find a file called <span 
class="aett-12">rterm.exe</span> which is in the <span 
class="aett-12">bin</span>
subfolder. The full filename including its path is going to be
<div class="center" 
>
<!--l. 44--><p class="noindent" >
<!--l. 44--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="aett-12">C:\Program</span><span 
class="aett-12">&#x00A0;Files\R\R-</span></span></span>3.3.0<span class="obeylines-h"><span class="verb"><span 
class="aett-12">\bin\Rterm.exe</span></span></span></div>
<!--l. 44--><p class="noindent" >Note that this is the file that will run <span 
class="aess-12">R </span>in a terminal window, not <span 
class="aett-12">rgui.exe</span> which is
for the standard <span 
class="aess-12">R </span>console. Note also that as from version 2.12.0, <span 
class="aess-12">R </span>running under
Windows had an extra element in the folder structure which depends on the
machine you are using. Many Windows users are now moving to 64 bit operating
systems and software, while others still use the older 32 bit software. Check your
path carefully.
<!--l. 46--><p class="indent" >   We now need to create a batch file. This is just a text file with the extension
<span 
class="aett-12">bat</span> instead of the normal <span 
class="aett-12">txt</span>. If you open a text file it is readable in a text editor
like notepad; a batch file is a set of commands that are executed when you run the
file. On Windows, this is as simple as pressing <span 
class="aett-12">&#x003C;Enter&#x003E; </span>when the filename is
highlighted in the Explorer window, or double clicking as if you were opening the
file.
<!--l. 48--><p class="indent" >   So let&#8217;s start by creating a text file in the chosen working directory. Do this
using the menus in Windows Explorer. Open the file so that we are able to add
the following text.
<div class="center" 
>
<!--l. 49--><p class="noindent" >
<!--l. 50--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="aett-12">"C:\Program</span><span 
class="aett-12">&#x00A0;Files\R\R-</span></span></span>3.3.0<span class="obeylines-h"><span class="verb"><span 
class="aett-12">\bin\Rterm.exe"</span><span 
class="aett-12">&#x00A0;&#x003C;</span><span 
class="aett-12">&#x00A0;mycommands.R</span><span 
class="aett-12">&#x00A0;&#x003E;</span><span 
class="aett-12">&#x00A0;myoutput.txt</span></span></span></div>
<!--l. 53--><p class="indent" >   This single command has three parts; the first part in quotes is the full path to
the program we want to run, and the quotes are essential. The second is the set of
commands we want executed in that program, and the last is the file where we
want the results to be saved. The symbols between the three parts are essential
and the direction is important. This process is often called &#8220;piping". The contents
of the commands file are piped into <span 
class="aess-12">R</span>., and the results are piped out to another
file.
<!--l. 55--><p class="indent" >   Save the text file and change its filename so that the extension is <span 
class="aett-12">bat</span>. Run the
file. If the full path to the <span 
class="aett-12">rterm.exe</span> was correct for your machine, and the file of
                                                                          

                                                                          
commands <span 
class="aett-12">mycommands.R</span> exists in the current directory, you should see that a
new text file called <span 
class="aett-12">myoutput.txt</span> has been created. You can open this file to see
what happened.
<!--l. 57--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x12-7500010.3"></a>A word of warning</h4>
<!--l. 59--><p class="noindent" >This approach works well for programs that have no bugs. Finding where a bug
exists is not impossible but can be frustrating if there are too many bugs to fix.
The program will stop if a line of code contains an error of any kind.
Unfortunately, experimentation is probably the only way to know if things will
work properly.
<!--l. 61--><p class="indent" >   You could re-run your programs frequently in order to ensure that you are
getting what you want. If it proves slow and frustrating to do this, it&#8217;s probably
because you have a large data set or some computationally intensive elements in
your program. If this is the case, you could use a subset of your data while you
test your programs.
<!--l. 65--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">10.4   </span> <a 
 id="x12-7600010.4"></a>Using file associations in Windows</h3>
<!--l. 67--><p class="noindent" >When I want to edit an <span 
class="aess-12">R </span>script file, I want it to open in my text editor of choice.
Under Windows operating systems, this can be achieved by ensuring a
file association is created. The simplest way to do this is to select the
default program to be use when you want to open a file with the extension
&#8220;<span 
class="aett-12">.R</span>".
<!--l. 69--><p class="indent" >   If you do this, then the next logical thing to want to do is to have that <span 
class="aess-12">R</span>
script processed using <span 
class="aess-12">R </span>itself. You could use the approach given earlier
in this chapter but an even better way exists that uses file associations
again.
<!--l. 71--><p class="indent" >   We need to make a batch file again, just like in the example on piping. This
batch file will have just one line in it and it needs to be put in a folder that is on
the system path. The single line is
<div class="center" 
>
<!--l. 72--><p class="noindent" >
<!--l. 73--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="aett-12">"C:\Program</span><span 
class="aett-12">&#x00A0;Files\R\R-</span></span></span>3.3.0<span class="obeylines-h"><span class="verb"><span 
class="aett-12">\bin\R.exe"</span><span 
class="aett-12">&#x00A0;CMD</span><span 
class="aett-12">&#x00A0;BATCH</span><span 
class="aett-12">&#x00A0;--vanilla</span><span 
class="aett-12">&#x00A0;--quiet</span><span 
class="aett-12">&#x00A0;%1</span></span></span></div>
<!--l. 76--><p class="indent" >   Now look for an <span 
class="aess-12">R </span>script and select the default program to open it again. This
                                                                          

                                                                          
time, browse for the batch file you just created. Now every time you click on an <span 
class="aess-12">R</span>
script, it will be processed by <span 
class="aess-12">R</span>. All output including commands will be put into a
file of the same name with an extension that has the three extra letters &#8220;<span 
class="aett-12">out</span>" on
the end. Use the process for file associations again to get this file opened
automatically; use the viewer of your choice, whether that be a text editor or a
browser.
<!--l. 78--><p class="indent" >   The use of the two arguments <span 
class="aett-12">vanilla </span>and <span 
class="aett-12">quiet </span>ensure you have a fresh
workspace and that the normal announcements of version number etc are not
included in the output file. You might want to include these welcome messages so
remove the <span 
class="aett-12">quiet </span>argument if you want. Another argument that might be useful
is the <span 
class="aett-12">save </span>argument. Add that in if you want to be able to open <span 
class="aess-12">R </span>again
in interactive mode later and be able ot continue from where you left
off.
<!--l. 80--><p class="indent" >   You might want to go back now and re-assign the default program for an <span 
class="aess-12">R</span>
script to be the text editor, and use the &#8220;open with" menu item to have it
processed using your batch process.
<!--l. 87--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">10.5   </span> <a 
 id="x12-7700010.5"></a>Don&#8217;t re-invent any wheels</h3>
<!--l. 89--><p class="noindent" >Sometimes it is obvious that you will need to write out some quite detailed and
complex sets of commands, but when you can&#8217;t find the functionality within the
base distribution of <span 
class="aess-12">R</span>, you might be tempted to write the code yourself. Before
you do that though, I suggest you stop and think if the task is something that
someone else is likely to have done before.
<!--l. 91--><p class="indent" >   If the answer is yes, then you should look at the vast list of contributed
packages available via the Comprehensive <span 
class="aess-12">R </span>Archive Network (CRAN) accessible
under
<div class="center" 
>
<!--l. 92--><p class="noindent" >
<!--l. 92--><p class="noindent" ><a 
href="http://CRAN.R-project.org" class="url" ><span 
class="aett-12">http://CRAN.R-_project.org</span></a></div>
<a 
 id="dx12-77001"></a>
<!--l. 94--><p class="noindent" >be warned though that this is not necessarily a successful way of finding the right
code. I prefer to do an internet search and hope the supporting documentation for
any contributed packages has the same key words as you are thinking about. The
data for many textbooks is also available as contributed packages so don&#8217;t be
tempted to enter data unnecessarily.
                                                                          

                                                                          
   <!--l. 3--><div class="crosslinks"><p class="noindent">[<a 
href="LURNBlindch11.html" >next</a>] [<a 
href="LURNBlindch9.html" >prev</a>] [<a 
href="LURNBlindch9.html#tailLURNBlindch9.html" >prev-tail</a>] [<a 
href="LURNBlindch10.html" >front</a>] [<a 
href="LURNBlind.html#LURNBlindch10.html" >up</a>] </p></div>
<!--l. 3--><p class="indent" >   <a 
 id="tailLURNBlindch10.html"></a>   
</body></html> 
